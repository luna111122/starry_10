{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">다이어리 목록</h2>

    <!-- 아코디언으로 감정과 방해 요소를 카테고리화 -->
    <div class="accordion" id="diaryCategories">

        <!-- 감정 카테고리 -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="emotionHeading">
                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#emotionCollapse" aria-expanded="true" aria-controls="emotionCollapse">
                    감정별 필터
                </button>
            </h2>
            <div id="emotionCollapse" class="accordion-collapse collapse show" aria-labelledby="emotionHeading" data-bs-parent="#diaryCategories">
                <div class="accordion-body">
                    <ul class="nav nav-pills justify-content-center">
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.happy') }}">좋음</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.normal') }}">보통</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.bad') }}">나쁨</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 방해 요소 카테고리 -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="distractHeading">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#distractCollapse" aria-expanded="false" aria-controls="distractCollapse">
                    방해 요소별 필터
                </button>
            </h2>
            <div id="distractCollapse" class="accordion-collapse collapse" aria-labelledby="distractHeading" data-bs-parent="#diaryCategories">
                <div class="accordion-body">
                    <ul class="nav nav-pills justify-content-center">
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.smartphone') }}">스마트폰</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.schedule') }}">일정</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.fatigue') }}">피로</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ url_for('diary.etc') }}">기타</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <!-- 다이어리 목록 -->
    <div class="row mt-5">
        {% for diary in diaries %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card shadow-sm h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ diary.title }}</h5>
                    <p class="card-text">{{ diary.content }}</p>
                    <p class="card-text">
                        <span class="badge bg-info text-dark">{{ diary.emotion }}</span>
                        <span class="badge bg-secondary">{{ diary.distract }}</span>
                    </p>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-outline-primary btn-sm">자세히 보기</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {% if not diaries %}
    <p class="text-center mt-4">다이어리가 없습니다.</p>
    {% endif %}

</div>
{% endblock %}
